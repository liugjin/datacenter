<div class="row nav-top"><div class="col s2"><span style="font-size: 14px">告警设置</span></div><div class="col l10"><station-breadcrumbs controller="controller" parameters="{}"></station-breadcrumbs></div></div><div class="row inventory"><div class="col s2 m2 l2 alarm-box1-control pad-control"><div class="invent-type"><div ng-click="selectTemplate('all')" ng-class="{'current': 'all' == currentTemplate}" class="col s12 m12 l12 type btn"><a><div class="type-img"><i class="material-icons center">select_all</i></div><div class="type-count">全部</div></a></div><div ng-repeat="template in templates | filter: filterTemplates() | orderBy: 'index': false" ng-class="{'current': template.model.template == currentTemplate.model.template}" ng-click="selectTemplate(template)" class="col s12 m12 l12 type btn"><a ng-href="" class="title"><div class="type-img"><!--.img-bing(style="background-image: url('{{setting.urls.uploadUrl}}/{{template.model.image}}');" ng-if='template.model.image' ng-class="{'img-type': template.model.template != currentTemplate.model.template, 'img-type-active': template.model.template == currentTemplate.model.template}")--><img src="{{setting.urls.uploadUrl}}/{{template.model.image}}" style="width:46px; height:46px"/></div><div title="{{template.model.name}}" class="type-count truncate">{{template.model.name}}</div></a></div></div></div><div class="col s10 m10 l10 alarm-box2-control invent-list"><div class="inventory-lists"><div class="col s12 m12 l12 inventory-nav valign-wrapper"><div class="nav-flex-grow left"><a href="" ng-click="saveSetting()" title="保存" ng-show="project.model._role.isAdmin || project.model._role.operations[0]=='_all' || project.model._role.operations.indexOf('setting')&gt;=0" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{addImg}}"/></div><span>保存</span></a></div><div class="right right-gap"><span>总告警数</span><span ng-click="selectSeverity(null)" ng-class="{active:severity==null}" class="left-gap">{{list.length}}</span></div><div ng-repeat="sty in severities" class="right right-gap"><span>{{sty.model.name}}</span><span ng-click="selectSeverity(sty.model.severity)" ng-class="{active:severity==sty.model.severity}" class="left-gap">{{getCountBySeverity(sty.model.severity)}}</span></div><div class="right search-wrapper"><i class="material-icons">search</i><input type="text" placeholder="" ng-model="search" required="required" class="search-input"/><i style="left: 225px;" ng-click="search = ''; pageIndex = 1;" ng-show="search" class="material-icons">close</i></div></div><!-- 列表视图--><div class="list-view"><table class="responsive-table centered highlight new-table"><thead><tr><th class="tHeader"><label title="全选"><input type="checkbox" value="" ng-model="user_all_select" checked="{{user_all_select}}" ng-change="user_all_change()" class="filled-in"/><span></span></label></th><th ng-show="currentTemplate == 'all'"><div ng-click="sortBy(&quot;template&quot;)" class="col-header text-align-left"><span>设备型号</span><span ng-show="sort.predicate == &quot;template&quot;" class="right">{{sort.reverse && "▽" || "△"}}</span></div></th><th ng-hide="currentTemplate == 'all'"><div ng-click="sortBy(&quot;name&quot;)" class="col-header text-align-left"><span>告警名称</span><span ng-show="sort.predicate == &quot;name&quot;" class="right">{{sort.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="sortBy(&quot;content&quot;)" class="col-header text-align-left"><span>告警内容</span><span ng-show="sort.predicate == &quot;content&quot;" class="right">{{sort.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="sortBy(&quot;severity&quot;)" class="col-header"><span>当前告警级别</span><span ng-show="sort.predicate == &quot;severity&quot;" class="right">{{sort.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="sortBy(&quot;newseverity&quot;)" class="col-header"><span>新告警级别</span><span ng-show="sort.predicate == &quot;newseverity&quot;" class="right">{{sort.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="sortBy(&quot;value&quot;)" class="col-header"><span>当前告警阀值</span><span ng-show="sort.predicate == &quot;model.tag&quot;" class="right">{{sort.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="sortBy(&quot;severity&quot;)" class="col-header"><span>告警开始条件</span><span ng-show="sort.predicate == &quot;severity&quot;" class="right">{{sort.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="sortBy(&quot;newvalue&quot;)" class="col-header"><span>新告警阀值</span><span ng-show="sort.predicate == &quot;model.tag&quot;" class="right">{{sort.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="sortBy(&quot;enable&quot;)" class="col-header"><span>状态</span><span ng-show="sort.predicate == &quot;model.enable&quot;" class="right">{{sort.reverse && "▽" || "△"}}</span></div></th></tr></thead><tbody><tr ng-repeat="event in list |filter:filterEvent()| orderBy: sort.predicate:sort.reverse track by $index"><td class="tHeader"><label><input type="checkbox" ng-model="event.checkedFlag" checked="event.checkedFlag" value="" ng-change="user_event_change(event)" class="filled-in"/><span></span></label></td><td ng-show="currentTemplate == 'all'" ng-click="selectTemplateId(event.type+'.'+event.templateId)" style="padding-left: 1rem" class="text-align-left"><div style="width: 130px; cursor:pointer" title="{{event.template}}" class="td-ellipsis">{{event.template}}</div></td><td ng-hide="currentTemplate == 'all'" style="padding-left: 1rem" class="text-align-left"><div style="width: 130px" title="{{event.name}}" class="td-ellipsis">{{event.name}}</div></td><td style="padding-left: 1rem" class="text-align-left"><div style="width: 130px" title="{{event.content}}" class="td-ellipsis">{{event.content}}</div></td><td>{{event.severityName}}</td><td style="padding:0"><input ng-if="!event.show" ng-click="editEventSeverity(event, $index)" type="text" ng-value="getSeverityName(event.severity)" readonly="readonly"/><select id="event{{$index}}" ng-model="event.newseverity" md-select="md-select" data="severities" ng-if="event.show" ng-change="user_editSer(event)"><option ng-repeat="severity in severities" value="{{severity.model.severity}}" ng-selected="1 == severity.model.severity">{{severity.model.name}}</option></select></td><td>{{event.value}}</td><td style="padding:0"><select ng-model="event.startCondition" md-select="md-select" data="operatorTypes" ng-change="user_startCond(event)"><option ng-repeat="operator in operatorTypes" value="{{operator.operator}}" ng-selected="event.startCondition == operator.operator">{{operator.name}}</option></select></td><td style="padding:0"><input ng-if="event.dataType!='enum'" type="text" ng-model="event.newvalue" maxlength="10" ng-change="user_newVal(event)" style="width:60px"/><select ng-if="event.dataType == 'enum'" ng-model="event.newvalue" md-select="md-select" ng-change="user_newVal(event)"><option ng-repeat="operator in event.format" value="{{operator.id}}" ng-selected="event.newvalue == operator.id">{{operator.name}}</option></select></td><td style="padding:0"><div style="width: 160px" class="td-ellipsis"><md-switch ng-model="event.enable" label-off="无效" label-on="有效" ng-change="switchEventAble(event)" style="margin-left:.75rem;"></md-switch></div></td><!--下面注释内容为使用原生select做的，因为md-select更费性能。 以前会引起浏览器页面崩溃，现在没有发现页面崩溃情况，暂时还用md-select写法--><!--td(style="padding:0")--><!--    select(ng-model='event.newseverity',style="display:block;    height: 2rem;border: 1px solid #0652a2 !important;color: white;text-align: center !important;background-color:rgba(26, 69, 162, 0.8);")--><!--        option(ng-repeat='severity in severities' value='{{severity.model.severity}}' style="background-color:transparent;") {{severity.model.name}}--></tr></tbody></table></div></div></div></div>