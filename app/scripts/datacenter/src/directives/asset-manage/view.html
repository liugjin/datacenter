<div class="row nav-top"><div class="col s2"><span>资产管理</span></div><div class="col l10"><station-breadcrumbs controller="controller" parameters="{}"></station-breadcrumbs></div></div><div class="row asset-type"><div class="col s2 m2 l2 invent-type"><div ng-repeat="type in equipTypes | filter: filterTypes() | orderBy: 'index': false" ng-class="{'current-type': type.type == currentType.type}" ng-click="selectEquipType(type)" class="type btn"><div class="type-img"><div style="background-image: url('{{setting.urls.uploadUrl}}/{{type.image}}');" ng-if="type.image" ng-class="{'img-type': type.type != currentType.type, 'img-type-active': type.type == currentType.type}" class="img-bing"></div></div><div class="type-count"><div class="left">{{type.name}}</div><div class="right">({{type.count}})</div></div></div></div><div class="col s10 m10 l10 invent-box"><div ng-show="deviceShow" class="asset-lists"><div class="col s12 m12 l12 asset-nav"><div class="nav-flex-grow left"><a href="" ng-click="addEquipment()" title="新增设备" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{addImg}}"/></div><span>新增</span></a></div><div class="nav-flex-grow left"><a href="" ng-click="switchView()" title="切换列表/视图" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{viewImg}}"/></div><span>{{viewName}}</span></a></div><div class="nav-flex-grow left"><a href="" ng-click="importAssets()" title="通过EXCEL表导入资产" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{viewImg}}"/></div><span>资产导入</span></a></div><div class="right search-wrapper"><i class="material-icons">search</i><input type="text" placeholder="搜索" ng-model="searchLists" required="required" class="search-input"/><i style="left: 225px;" ng-click="searchLists = ''; pageIndex = 1;" ng-show="searchLists" class="material-icons">close</i></div></div><div ng-show="listShow" class="col s12 m12 l12 list-view"><div style="height:65vh;overflow:auto;" class="col s12 m12 l12"><table class="responsive-table centered highlight"><thead><tr><th><div ng-click="station.equipments.sortBy(&quot;model.name&quot;)" class="col-header"><span>名称</span><span ng-show="station.equipments.predicate == &quot;model.name&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.equipment&quot;)" class="col-header"><span>设备ID</span><span ng-show="station.equipments.predicate == &quot;model.equipment&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div class="col-header"><span>资产编号</span><span ng-show="station.equipments.predicate == &quot;model.tag&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.typeName&quot;)" class="col-header"><span>类型</span><span ng-show="station.equipments.predicate == &quot;model.typeName&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.templateName&quot;)" class="col-header"><span>型号</span><span ng-show="station.equipments.predicate == &quot;model.templateName&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.vendorName&quot;)" class="col-header"><span>厂商</span><span ng-show="station.equipments.predicate == &quot;model.vendorName&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.stationName&quot;)" class="col-header"><span>站点区域</span><span ng-show="station.equipments.predicate == &quot;model.stationName&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.createtime&quot;)" class="col-header"><span>登记时间</span><span ng-show="station.equipments.predicate == &quot;model.createtime&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.owner&quot;)" class="col-header"><span>责任人</span><span ng-show="station.equipments.predicate == &quot;model.owner&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div class="col-header"><span>操作</span></div></th></tr></thead><tbody><tr ng-repeat="equip in equipments | filter: filterEquipment() | orderBy: station.equipments.predicate:station.equipments.reverse | limitTo: pageItems * pageIndex | limitTo: limitToEquipment()" ng-class="{active: equipment.key == equip.key}"><td ng-click="lookData(equip)">{{equip.model.name}}</td><td ng-click="lookData(equip)">{{equip.model.equipment}}</td><td ng-click="lookData(equip)">{{equip.model.tag || '-'}}</td><td ng-click="lookData(equip)">{{equip.model.typeName}}</td><td ng-click="lookData(equip)">{{equip.model.templateName}}</td><td ng-click="lookData(equip)">{{equip.model.vendorName}}</td><td ng-click="lookData(equip)">{{equip.model.stationName}}</td><td ng-click="lookData(equip)">{{equip.model.createtime | date: 'yyyy-MM-dd'}}</td><td ng-click="lookData(equip)">{{equip.model.owner}}</td><td style="padding: 0;"><a ng-click="lookData(equip);$event.stopPropagation();" title="查看设备详情" class="waves-effect waves-light"><img ng-src="{{detailGreenImg}}"/></a><a href="" ng-click="editData(equip);$event.stopPropagation();" title="编辑设备" class="waves-effect waves-light"><img ng-src="{{editGreenImg}}"/></a><a href="" ng-click="deleteEquip(equip); $event.stopPropagation();" title="删除设备" class="waves-effect waves-light"><img ng-src="{{deleteGreenImg}}"/></a></td></tr></tbody></table></div></div><div ng-show="!listShow" class="col s12 m12 l12 list-card"><div ng-repeat="equip in equipments | filter: filterEquipment() | orderBy: station.equipments.predicate:station.equipments.reverse | limitTo: pageItems * pageIndex | limitTo: limitToEquipment()" ng-class="{'pad-left': $index%4==0}" style="padding: 0 0 .75rem .75rem;" class="col s12 m4 l3"><div class="card hoverable"><div ng-click="lookData(equip)" class="card-image"><a ng-href="" title="访问设备"><div class="card-img-placeholder"><img style="cursor:pointer" ng-if="equip.equipmentTemplate.model.image" ng-src="{{setting.urls.uploadUrl}}/{{equip.equipmentTemplate.model.image}}" class="responsive-img"/><!--img.responsive-img(ng-if='equip.image' ng-src='{{setting.urls.uploadUrl}}/{{equip.image}}')--><!--.default-img(ng-style="{'background-image': imgString(equip.model.template)}")--></div></a></div><div class="card-content"><span title="{{equip.model.name}}" style="font-weight:bold; color: #1d2123;" ng-click="lookData(equip)"><div class="truncate font-bold">{{equip.model.name}}</div></span><span title="{{equip.model.type}} / {{equip.model.vendor}} / {{equip.model.template}}" style="color: #a2aab6;" ng-click="lookData(equip)"><div class="truncate font-12">{{equip.model.typeName}} / {{equip.model.vendorName}} / {{equip.model.templateName}}</div></span><span><div style="margin-top: 5px;" class="truncate"><a href="" ng-click="copyEquipment(equip);$event.stopPropagation();" title="复制设备" class="waves-effect waves-light right"><img ng-src="{{copyGreenImg}}"/></a><a href="" ng-click="deleteEquip(equip);$event.stopPropagation();" title="删除设备" class="waves-effect waves-light right"><img ng-src="{{deleteGreenImg}}"/></a><a href="" ng-click="editData(equip);$event.stopPropagation();" title="编辑设备" class="waves-effect waves-light right"><img ng-src="{{editGreenImg}}"/></a></div></span></div></div></div></div><div class="col s12 m12 l12 eventpagination"><div style="flex:1;"></div><div style="flex:2;" class="valign-wrapper"><div style="margin: 0 auto;"><ul ng-show="filterEquipmentItem().pageCount &gt; 1" ng-cloak="ng-cloak" class="pagination"><li ng-class="{disabled: pageIndex &lt;= 1, &quot;waves-effect&quot;: pageIndex &gt; 1}" ng-click="pageIndex&gt;1?(pageIndex = pageIndex - 1):0"><a href="" ng-class="{'black-text': pageIndex &gt; 1}"><i class="material-icons">chevron_left</i></a></li><li ng-class="{active: page == pageIndex, &quot;waves-effect&quot;: page != pageIndex}" ng-repeat="page in filterEquipmentItem().pages" ng-click="selectPage(page)" ng-if="(page&gt;(pageIndex-4)&amp;&amp;page&lt;(pageIndex+4))||page==1||page==filterEquipmentItem().pageCount"><a href="">{{((page>(pageIndex-3)&&page<(pageIndex+3))||page==1||page==filterEquipmentItem().pageCount) ? page:".."}}</a></li><li ng-class="{disabled: pageIndex &gt;= filterEquipmentItem().pageCount, &quot;waves-effect&quot;: pageIndex &lt; filterEquipmentItem().pageCount}" ng-click="pageIndex&lt;filterEquipmentItem().pageCount?(pageIndex = pageIndex + 1):0" class="last"><a href="" ng-class="{'black-text': pageIndex &lt; filterEquipmentItem().pageCount}"><i class="material-icons">chevron_right</i></a></li></ul></div></div><div style="flex:1;"></div></div></div><asset-detail controller="controller" parameters="{}" ng-show="detailShow"></asset-detail><div ng-show="addShow" class="asset-add"><div class="col s12 m12 l12 asset-nav"><div class="nav-flex-grow left"><a href="" title="返回" ng-click="backList();" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{backImg}}" style="height: 1.5rem;"/></div><span>返回</span></a></div><div class="nav-flex-grow left"><a href="" title="保存" ng-click="saveEquipmentGroups()" ng-show="equipment.model.name || equipment.model.desc" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{saveImg}}"/></div><span>保存</span></a></div><div class="right search-wrapper"><i class="material-icons">search</i><input type="text" placeholder="搜索" ng-model="searchEdit" required="required" class="search-input"/><i style="left: 225px;" ng-click="searchEdit = '';" ng-show="searchEdit" class="material-icons">close</i></div></div><div class="col l5 asset-left"><div class="col l12 asset-img"><div class="row no-margin"><div class="img-uploader model-img-upload"><image-uploader ng-model="equipment.model.image" dir="{{setting.urls.uploadUrl}}"></image-uploader></div></div></div><div class="col l12 critical-model"><div class="col l6 no-padding"><div style="margin-top: 1rem;" class="col l12"><label>设备站点</label><div class="input-field"><select ng-model="equipment.model.station" md-select="md-select" data="equipment.model" ng-change="stationChange()"><option ng-repeat="station in project.stations.items" value="{{station.model.station}}" ng-selected="equipment.model.station == station.model.station">{{station.model.name}}</option></select></div></div><div style="" class="col l12"><label>设备类型</label><div class="input-field"><select ng-model="equipment.model.type" md-select="md-select" data="equipment.model" ng-change="equipTypeChange()"><option value="">未知设备类型</option><option ng-repeat="type in project.typeModels.equipmenttypes.items" value="{{type.model.type}}" ng-selected="equipment.model.type == type.model.type">{{type.model.name}}</option></select></div></div><div style="" class="col l12"><label>设备厂商</label><div class="input-field"><select ng-model="equipment.model.vendor" md-select="md-select" data="equipment.model" ng-change="equipVendorChange()"><option value="">未知设备厂商</option><option ng-repeat="vendor in project.typeModels.vendors.items" value="{{vendor.model.vendor}}" ng-selected="equipment.model.vendor == vendor.model.vendor">{{vendor.model.name}}</option></select></div></div><div style="" class="col l12"><label>设备型号</label><div class="input-field"><select ng-model="equipment.model.template" md-select="md-select" data="equipment.model.type + &quot;.&quot; + equipment.model.vendor" ng-change="equipTemplateChange()"><option value="">未知设备型号</option><option ng-repeat="template in project.equipmentTemplates.items | filter: filterEquipmentTemplate()" value="{{template.model.template}}" ng-selected="equipment.model.template == template.model.template">{{template.model.name}}</option></select></div></div><div style="" class="col l12"><label>责任人</label><div class="input-field"><select ng-model="equipment.model.owner" md-select="md-select" data="equipment.model"><option value="">未知责任人</option><option ng-repeat="user in userMsg" value="{{user.user}}" ng-selected="equipment.model.owner == user.user">{{user.name}}</option></select></div></div></div><div class="col l6 no-padding"><div style="margin-top: 1rem;" class="col l12"><label>设备ID</label><div class="input-field"><input type="text" ng-model="equipment.model.equipment" disabled="disabled" class="validate"/></div></div><div style="" class="col l12"><label>设备名称</label><div class="input-field"><input type="text" ng-model="equipment.model.name" class="validate"/></div></div><div style="" class="col l12"><label>描述</label><div class="input-field"><input type="textarea" ng-model="equipment.model.desc" style="" class="validate desc"/></div></div><div style="" ng-repeat="property in equipment._properties | filter: filterEditItems1() | orderBy: 'model.group':true" class="col l12"><label>{{property.model.name}}</label><div ng-switch="property.model.dataType" title="{{property.value}}" class="input-field"><input ng-switch-default="ng-switch-default" type="text" ng-model="property.value" class="validate"/><input ng-switch-when="date" type="date" ng-model="property.value" class="validate"/></div></div></div></div></div><div class="col l7 asset-right"><div class="col l12 no-padding asset-right-pro"><div class="col l12 asset-right-table"><table class="responsive-table centered"><span>采集单元设置</span><thead><tr><th style="width: 20%;"><span>名称</span></th><th><span>绑定值</span></th></tr></thead><tbody><tr ng-repeat="sampleunit in equipment._sampleUnits| orderBy: 'name': true"><td style="color: #a2aab6;">{{sampleunit.name}}</td><td><div class="col s12"><input type="text" ng-model="sampleunit.value" class="validate"/></div></td></tr></tbody></table><table class="responsive-table centered"><span>扩展属性</span><thead><tr><th style="width: 20%;"><span>名称</span></th><th><span>赋值</span></th><th style="width: 15%;"><span>单位</span></th></tr></thead><tbody><tr ng-repeat="property in equipment._properties | filter: filterEditItems2() | orderBy: 'model.index': false"><td style="color: #a2aab6;">{{property.model.name}}</td><td ng-switch="property.model.dataType"><div ng-switch-default="ng-switch-default" class="col s12"><input type="text" ng-model="property.model.value" class="validate"/></div><div ng-switch-when="enum" class="col s12"><select ng-model="property.model.value" md-select="md-select" data="property.model.dataType"><option ng-repeat="map in property.model.format.split(',')" value="{{map.split(':')[0]}}" ng-selected="property.model.value==map.split(':')[0]">{{map.split(':')[1]}}</option></select></div><div ng-switch-when="int" class="col s12"><input type="number" ng-model="property.model.value" min="{{property.model._format.min}}" max="{{property.model._format.max}}" step="any" class="validate"/></div><div ng-switch-when="float" class="col s12"><input type="number" ng-model="property.model.value" min="{{property.model._format.min}}" max="{{property.model._format.max}}" step="any" class="validate"/></div><div ng-switch-when="color" class="col s12"><input type="color" ng-model="property.model.value" class="validate"/></div><div ng-switch-when="password" class="col s12"><input type="password" ng-model="property.model.value" class="validate"/></div><div ng-switch-when="date" class="col s12"><input type="date" input-format="input-format" ng-model="property.model.value" class="validate"/></div><div ng-switch-when="time" class="col s12"><input type="time" ng-model="property.model.value" class="validate"/></div><div ng-switch-when="datetime" class="col s12"><input type="datetime-local" input-format="input-format" ng-model="property.model.value" class="validate"/></div><div ng-switch-when="bool" class="col s12 property-checkbox"><input type="checkbox" ng-model="property.model.value" id="cb-{{property.model.property}}"/></div><div ng-switch-when="image" class="col s12"><div style="margin: 0 auto;" class="img-uploader"><image-uploader ng-model="property.model.value" dir="{{setting.urls.uploadUrl}}"></image-uploader></div></div><div ng-switch-when="file" class="col s12"><div class="file-uploader"><file-uploader ng-model="property.model.value" dir="{{setting.urls.uploadUrl}}"></file-uploader></div></div></td><td style="color: #a2aab6;">{{project.typeModels.units.getItem(property.model.unit).model.abbr || property.model.unit}}</td></tr></tbody></table></div></div></div></div><import-assets controller="controller" parameters="{}" ng-show="importShow"></import-assets></div></div>