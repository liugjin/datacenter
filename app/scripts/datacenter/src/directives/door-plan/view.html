<div class="row nav-top"><div class="col l12"><nav class="no-bg-color"><div class="nav-wrapper"><div class="col s12 truncate"><a ng-repeat="parent in parents" href="" data-hover="true" title="{{parent.model.name}}" ng-click="selectParent(parent)" ng-if="parents" class="breadcrumb">{{parent.model.name}}</a><a href="" data-target="stations" data-hover="true" md-dropdown="md-dropdown" title="{{station.model.name}}" class="breadcrumb dropdown-trigger">{{station.model.name}}</a><a href="" data-target="childrens" data-hover="true" md-dropdown="md-dropdown" ng-if="station.stations.length&gt;0" class="breadcrumb dropdown-trigger"><span class="active-menu">查看下级</span></a><a href="" data-target="equipments" data-hover="true" md-dropdown="md-dropdown" title="{{currentDoor.model.name}}" class="breadcrumb dropdown-trigger">{{currentDoor.model.name || '-'}}</a><div class="nav-flex-grow right"><a title="返回" ng-href="#/door-manager/{{equipment.model.user}}/{{equipment.model.project}}" class="waves-effect waves-light btn"><div class="left"></div><span>返回</span></a><a href="" title="门禁卡授权" data-target="door-plan-modal" ng-click="addDoorCardAuthorize()" class="waves-effect waves-light btn modal-trigger"><div class="left"><img ng-src="{{doorImg}}"/></div><span>门禁卡授权</span></a></div></div></div></nav></div></div><ul id="stations" class="dropdown-content"><li ng-repeat="sta in stations | filter:{key: &quot;!=&quot;+station.key}" ng-class="{active: sta.key == station.key}"><a ng-href="" ng-click="selectStation(sta)"><span>{{sta.model.name}}</span></a></li></ul><ul id="childrens" ng-if="station.stations.length&gt;0" class="dropdown-content"><li ng-repeat="sta in station.stations"><a ng-href="" ng-click="selectChild(sta)"><span>{{sta.model.name}}</span></a></li></ul><ul id="equipments" class="dropdown-content"><li ng-repeat="door in doorEquips" ng-class="{active: door.key == currentDoor.key}"><a ng-href="" ng-click="selectDoor(door)"><span>{{door.model.name}}</span></a></li></ul><div class="row"><div class="col l4 no-padding-right"><div class="door-image"><div class="equip-image"><img ng-if="currentDoor.model.image || currentDoor.equipmentTemplate.model.image" ng-src="{{setting.urls.uploadUrl}}/{{currentDoor.model.image || currentDoor.equipmentTemplate.model.image}}"/><img ng-if="!currentDoor.model.image &amp;&amp; !currentDoor.equipmentTemplate.model.image" ng-src="{{noEquipImg}}"/><h6>{{currentDoor.model.name}}</h6></div><div class="door-command-button"><a href="" title="时间同步" ng-click="executeCommand(&quot;door-time&quot;)" class="waves-effect waves-light btn"><span>时间同步</span></a><h6>门禁时间: {{currentDoorSignals['access-control-date'].value? (currentDoorSignals['access-control-date'].value | date: 'yyyy-MM-dd HH:mm:ss') : '未同步时间'}}</h6></div><div class="door-command-button"><a href="" title="远程开门" ng-click="executeCommand(&quot;remote-open&quot;)" ng-disabled="currentDoorSignals['door-switch-status'].value == 1" class="waves-effect waves-light btn"><span>远程开门</span></a><h6>当前门状态: {{currentDoorSignals['door-switch-status'].value == 1? "门开" : "门关" }}</h6></div></div></div><div class="col l8 no-padding-right"><div class="door-list"><h6>已授权卡列表</h6><div class="card-content"><table class="card-table"><thead><tr class="border-bottom"><td>&nbsp;</td><!--td.head-block
    label
        input(type="checkbox" class="filled-in" ng-model="select" ng-change="selectAll()")
        span &nbsp;--><td>卡号</td><td>卡类型</td><td>卡状态</td><td>持卡人</td><td>到期时间</td></tr></thead><tbody><tr ng-repeat="card in cardsData | filter: filterCard() | limitTo: pageItemsAuthorize * pageIndexAuthorize | limitTo: limitToAuthorize()" class="border-bottom"><td>&nbsp;</td><!--td.head-block
    label
        input(type="checkbox" class="filled-in" ng-model="card.checked" ng-change="selectOne()")
        span &nbsp;--><td>{{card.cardNo || ''}}</td><td>{{getcardtype(card.cardType)}}</td><td>{{getcardstatus(card.byCardValid)}}</td><td>{{getUserNameByCard(card.cardNo) || ''}}</td><td>{{card.expireDate || ''}}</td></tr></tbody></table><div style="margin-top: 1rem;" class="col s12 m12 l12 eventpagination"><div style="flex:1;"></div><div style="flex:2;" class="valign-wrapper"><div style="margin: 0 auto;"><ul ng-show="filterAuthorizeItem().pageCount &gt; 1" ng-cloak="ng-cloak" class="pagination"><li ng-class="{disabled: pageIndexAuthorize &lt;= 1, &quot;waves-effect&quot;: pageIndexAuthorize &gt; 1}" ng-click="pageIndexAuthorize&gt;1?(pageIndexAuthorize = pageIndexAuthorize - 1):0"><a href="" ng-class="{'choose-text': pageIndexAuthorize &gt; 1}"><i class="material-icons">chevron_left</i></a></li><li ng-class="{active: page == pageIndexAuthorize, &quot;waves-effect&quot;: page != pageIndexAuthorize}" ng-repeat="page in filterAuthorizeItem().pages" ng-click="selectPageAuthorize(page)" ng-if="(page&gt;(pageIndexAuthorize-4)&amp;&amp;page&lt;(pageIndexAuthorize+4)) || page==1 || page==filterAuthorizeItem().pageCount"><a href="">{{( (page>(pageIndexAuthorize-3)&&page<(pageIndexAuthorize+3)) || page==1 || page==filterAuthorizeItem().pageCount ) ? page : ".."}}</a></li><li ng-class="{disabled: pageIndexAuthorize &gt;= filterAuthorizeItem().pageCount, &quot;waves-effect&quot;: pageIndexAuthorize &lt; filterAuthorizeItem().pageCount}" ng-click="pageIndexAuthorize&lt;filterAuthorizeItem().pageCount?(pageIndexAuthorize = pageIndexAuthorize + 1):0" class="last"><a href="" ng-class="{'choose-text': pageIndexAuthorize &lt; filterAuthorizeItem().pageCount}"><i class="material-icons">chevron_right</i></a></li></ul></div></div><div style="flex:1;"></div></div></div></div></div></div><div id="door-plan-modal" md-modal="md-modal" class="modal"><div class="modal-content"><div class="row no-margin door-plan"><div class="col l12 nav-top"><nav><div class="nav-flex-grow left"><a href="" ng-click="closeModal()" title="收起" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{closeImg}}"/></div><span>收起</span></a></div></nav></div><div class="col s12 card-list"><div class="card-content"><table class="card-table"><thead><tr class="border-bottom"><td>&nbsp;</td><!--td.head-block
    label
        input(type="checkbox" class="filled-in" ng-model="select" ng-change="selectAll()")
        span &nbsp;--><td>卡ID</td><td>卡名称</td><td>卡种类</td><td>持卡人</td><td>卡状态</td><td>卡有效开始时间</td><td>卡有效结束时间</td><!--td 注册时间--></tr></thead><tbody><tr ng-repeat="card in cardEquips | filter: filterCard() | limitTo: pageItemsCard * pageIndexCard | limitTo: limitToCardEquip()" ng-class="{active: card.model.equipment == currentCard.model.equipment}" ng-click="selectCardEquip(card)" class="border-bottom"><td>&nbsp;</td><!--td.head-block
    label
        input(type="checkbox" class="filled-in" ng-model="card.checked" ng-change="selectOne()")
        span &nbsp;--><td>{{card.getPropertyValue('card-id')}}</td><td>{{card.getPropertyValue('card-name')}}</td><td>{{formatValue('card-type', card.getPropertyValue('card-type'))}}</td><td>{{getOweName(card.getPropertyValue('card-owner'))}}</td><!--td {{formatValue('card-status', card.getPropertyValue('card-status'))}}--><td><div class="credit-info-span"><span class="result-block">{{formatValue('card-status', card.getPropertyValue('card-status'))}}</span></div></td><td>{{card.getPropertyValue('card-active-start-time')| date:'yyyy-MM-dd HH:mm:ss'}}</td><td>{{card.getPropertyValue('card-active-end-time')| date:'yyyy-MM-dd HH:mm:ss'}}</td><!--td {{card.getPropertyValue('registration-time')| date:'yyyy-MM-dd HH:mm:ss'}}--></tr></tbody></table><div class="col s12 m12 l12 eventpagination"><div style="flex:1;"></div><div style="flex:2;" class="valign-wrapper"><div style="margin: 0 auto;"><ul ng-show="filterCardEquipItem().pageCount &gt; 1" ng-cloak="ng-cloak" class="pagination"><li ng-class="{disabled: pageIndexCard &lt;= 1, &quot;waves-effect&quot;: pageIndexCard &gt; 1}" ng-click="pageIndexCard&gt;1?(pageIndexCard = pageIndexCard - 1):0"><a href="" ng-class="{'choose-text': pageIndexCard &gt; 1}"><i class="material-icons">chevron_left</i></a></li><li ng-class="{active: page == pageIndexCard, &quot;waves-effect&quot;: page != pageIndexCard}" ng-repeat="page in filterCardEquipItem().pages" ng-click="selectPageCard(page)" ng-if="(page&gt;(pageIndexCard-4)&amp;&amp;page&lt;(pageIndexCard+4)) || page==1 || page==filterCardEquipItem().pageCount"><a href="">{{( (page>(pageIndexCard-3)&&page<(pageIndexCard+3)) || page==1 || page==filterCardEquipItem().pageCount ) ? page : ".."}}</a></li><li ng-class="{disabled: pageIndexCard &gt;= filterCardEquipItem().pageCount, &quot;waves-effect&quot;: pageIndexCard &lt; filterCardEquipItem().pageCount}" ng-click="pageIndexCard&lt;filterCardEquipItem().pageCount?(pageIndexCard = pageIndexCard + 1):0" class="last"><a href="" ng-class="{'choose-text': pageIndexCard &lt; filterCardEquipItem().pageCount}"><i class="material-icons">chevron_right</i></a></li></ul></div></div><div style="flex:1;"></div></div></div></div><div class="col s12 card-select"><h6>门禁编辑</h6><div class="col l12 nav-item"><div style="margin-top: .75rem;" class="col l6"><label>卡种类</label><div class="input-field"><input type="text" ng-model="doorCardAuthorize.cardTypeName" disabled="disabled" class="validate disabled"/></div></div><div style="margin-top: .75rem;" class="col l6"><label>卡ID</label><div class="input-field"><input type="text" ng-model="doorCardAuthorize.cardId" disabled="disabled" class="validate disabled"/></div></div><div style="margin-top: .75rem;" class="col l6"><label>用户ID</label><div class="input-field"><input type="text" ng-model="doorCardAuthorize.userId" disabled="disabled" class="validate disabled"/></div></div><!--.col.l6(style="margin-top: .75rem;")--><!--    label 用户密码--><!--    .input-field--><!--        input.validate(type='text' ng-model='doorCardAuthorize.userPassword' placeholder="输入用户密码")--><div style="margin-top: .75rem;" class="col l6"><label>到期日期</label><div class="input-field"><input type="date" input-format="input-format" ng-model="doorCardAuthorize.expireDate" disabled="disabled" class="validate"/></div></div></div><div class="col s12 nav-btn"><div class="nav-flex-grow left"><a href="" ng-click="confirmDoorCardAuthorize()" title="保存" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{saveImg}}"/></div><span>保存</span></a></div><div class="nav-flex-grow left"><a href="" ng-click="closeModal()" title="取消" style="margin-right: 0;" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{cancelImg}}"/></div><span>取消</span></a></div></div></div></div></div></div>