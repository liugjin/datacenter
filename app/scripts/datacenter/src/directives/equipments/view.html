<div class="row nav-top"><div class="col s2"><span>设备管理</span></div><div class="col s10"><nav><div class="nav-wrapper"><ul class="right"><li><a href="#device-modal" ng-click="createDevice(1)" title="新增设备" class="btn modal-trigger edit-btn"><span>设备添加</span></a></li><li><a href="#modal2" ng-click="createDevice(2)" title="设备库安装/卸载" class="btn modal-trigger edit-btn"><span>设备库安装/卸载</span></a></li></ul></div></nav></div></div><div class="row content"><div class="col l12 cool-content"><div class="new-table"><table><thead><tr><th><div ng-click="station.equipments.sortBy(&quot;model.equipment&quot;)" class="col-header text-align-left"><span>设备ID</span><span ng-show="station.equipments.predicate == &quot;model.equipment&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.name&quot;)" class="col-header text-align-left table-th-padding"><span>设备名称</span><span ng-show="station.equipments.predicate == &quot;model.name&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div class="col-header"><span>设备类型</span><span ng-show="station.equipments.predicate == &quot;model.owner&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.owner&quot;)" class="col-header"><span>设备地址</span><span ng-show="station.equipments.predicate == &quot;model.owner&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.owner&quot;)" class="col-header"><span>端口号</span><span ng-show="station.equipments.predicate == &quot;model.owner&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.owner&quot;)" class="col-header"><span>通讯参数</span><span ng-show="station.equipments.predicate == &quot;model.owner&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div class="col-header"><span>设备条码</span><span ng-show="station.equipments.predicate == &quot;model.owner&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.templateName&quot;)" class="col-header text-align-left"><span>型号</span><span ng-show="station.equipments.predicate == &quot;model.templateName&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div class="col-header"><span>设备库版本</span><span ng-show="station.equipments.predicate == &quot;model.templateName&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.vendorName&quot;)" class="col-header text-align-left"><span>厂商</span><span ng-show="station.equipments.predicate == &quot;model.vendorName&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.stationName&quot;)" class="col-header text-align-left"><span>所属站点</span><span ng-show="station.equipments.predicate == &quot;model.stationName&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div class="col-header"><span>过保日期</span><span ng-show="station.equipments.predicate == &quot;model.owner&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.createtime&quot;)" class="col-header"><span>启用日期</span><span ng-show="station.equipments.predicate == &quot;model.createtime&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th ng-show="project.model._role.isAdmin || project.model._role.operations[0]=='_all' || project.model._role.operations.indexOf('asset-manager-edit')&gt;=0"><div class="col-header"><span>操作</span></div></th></tr></thead><tbody><tr ng-repeat="equip in equipments | limitTo: pageItems * pageIndex | limitTo: limitToEquipment()" ng-class="{active: equipment.key == equip.key}"><td>{{equip.model.equipment}}</td><td>{{equip.model.name}}</td><td>{{equip.model.typeName}}</td><td>{{equip.model.address}}</td><td>{{equip.model.newport}}</td><td>{{equip.model.parameters}}</td><td>{{equip.model.tag}}</td><td>{{equip.model.templateName}}</td><td>{{equip.model.libraryVersion}}</td><td>{{equip.model.vendorName}}</td><td>{{equip.model.stationName}}</td><td>{{equip.model.expiryDate}}</td><td>{{equip.model.createtime | date: 'yyyy-MM-dd'}}</td><td style="padding: 0;" ng-show="project.model._role.isAdmin || project.model._role.operations[0]=='_all' || project.model._role.operations.indexOf('asset-manager-edit')&gt;=0"><a href="#device-modal" ng-click="editDevice(equip);" title="编辑设备" class="waves-effect waves-light modal-trigger"><img ng-src="{{getComponentPath('image/edit-green.svg')}}" class="icon"/></a><a href="" ng-click="deleteDevice(equip); $event.stopPropagation();" title="删除设备" class="waves-effect waves-light"><img ng-src="{{getComponentPath('image/delete-green.svg')}}" class="icon"/></a></td></tr></tbody></table></div></div><div style="position:relative" class="col l12"><div class="eventpagination"><div style="flex:1;"></div><div style="flex:2;" class="valign-wrapper"><div style="margin: 0 auto;"><ul ng-show="filterEquipmentItem().pageCount &gt; 1" ng-cloak="ng-cloak" class="pagination"><li ng-class="{disabled: pageIndex &lt;= 1, &quot;waves-effect&quot;: pageIndex &gt; 1}" ng-click="pageIndex&gt;1?(pageIndex = pageIndex - 1):0" class="page-button"><a href="" ng-class="{'black-text': pageIndex &gt; 1}"><i class="material-icons">chevron_left</i></a></li><li ng-class="{active: page == pageIndex, &quot;waves-effect&quot;: page != pageIndex}" ng-repeat="page in filterEquipmentItem().pages" ng-click="selectPage(page)" ng-if="(page&gt;(pageIndex-4)&amp;&amp;page&lt;(pageIndex+4))||page==1||page==filterEquipmentItem().pageCount" class="page-button"><a href="">{{((page>(pageIndex-3)&&page<(pageIndex+3))||page==1||page==filterEquipmentItem().pageCount) ? page:".."}}</a></li><li ng-class="{disabled: pageIndex &gt;= filterEquipmentItem().pageCount, &quot;waves-effect&quot;: pageIndex &lt; filterEquipmentItem().pageCount}" ng-click="pageIndex&lt;filterEquipmentItem().pageCount?(pageIndex = pageIndex + 1):0" class="last page-button"><a href="" ng-class="{'black-text': pageIndex &lt; filterEquipmentItem().pageCount}"><i class="material-icons">chevron_right</i></a></li></ul></div></div><div style="flex:1;"></div></div></div></div><div md-modal="md-modal" id="device-modal" class="modal bottom-sheet modal-fixed-footer"><div class="row nav-top"><div class="col s2"><span style="font-size: 18px">{{equipment.model.name?"编辑":"新增"}}设备</span></div></div><div class="modal-content"><div class="row"><div style="display: flex;flex-wrap:wrap;justify-content:space-between;padding: 0 2%" class="col l12"><div class="selection-box"><div class="label"><span>设备名称：</span><img src="{{getComponentPath('image/bixutian.svg')}}" alt="" width="12px" height="12px"/></div><div class="select"><input type="text" ng-model="equipment.model.name" class="validate input-new-css"/></div></div><div class="selection-box"><div class="label"><span>设备类型：</span><img src="{{getComponentPath('image/bixutian.svg')}}" alt="" width="12px" height="12px"/></div><div class="select"><select ng-model="equipment.model.type" md-select="md-select" data="equipment.model" ng-change="equipTypeChange()"><option ng-repeat="type in project.typeModels.equipmenttypes.items | filter: filterTypes()" value="{{type.model.type}}" ng-selected="equipment.model.type == type.model.type">{{type.model.name}}</option></select></div></div><div class="selection-box"><div class="label"><span>设备型号：</span><img src="{{getComponentPath('image/bixutian.svg')}}" alt="" width="12px" height="12px"/></div><div class="select"><select ng-model="equipment.model.template" md-select="md-select" data="equipment.model.type + &quot;.&quot; + equipment.model.vendor" ng-change="equipTemplateChange()"><option ng-repeat="template in project.equipmentTemplates.items | filter: filterTemplates()" value="{{template.model.template}}" ng-selected="equipment.model.template == template.model.template">{{template.model.name}}</option></select></div></div><div class="selection-box"><div class="label"><span>端口号：</span><img src="{{getComponentPath('image/bixutian.svg')}}" alt="" width="12px" height="12px"/></div><div class="select"><select ng-model="equipment.model.port" md-select="md-select" data="equipment.model" ng-change="portChange()"><option ng-repeat="port in ports" value="{{port.value}}" ng-selected="equipment.model.port == port.value">{{port.name}}</option></select></div></div><div ng-show="equipment.model.port.substr(0,1)!='d'" class="selection-box"><div class="label"><span>设备地址：</span><img src="{{getComponentPath('image/bixutian.svg')}}" alt="" width="12px" height="12px"/></div><div class="select"><input type="text" ng-model="equipment.model.address" class="validate input-new-css"/></div></div><div ng-show="equipment.model.port.substr(0,1)!='d'&amp;&amp;equipment.model.port!='ip'" class="selection-box"><div class="label"><span>通讯参数：</span><img src="{{getComponentPath('image/bixutian.svg')}}" alt="" width="12px" height="12px"/></div><div class="select"><input type="text" ng-model="equipment.model.parameters" class="validate input-new-css"/></div></div><div class="selection-box"><div class="label"><span>所属站点：</span><img src="{{getComponentPath('image/bixutian.svg')}}" alt="" width="12px" height="12px"/></div><div class="select"><select ng-model="equipment.model.station" md-select="md-select" data="equipment.model" ng-change="stationChange()"><option ng-repeat="station in project.stations.items" value="{{station.model.station}}" ng-selected="equipment.model.station == station.model.station">{{station.model.name}}</option></select></div></div><div ng-show="equipment.model.port=='ip'" class="selection-box"><div class="label"><span>模块地址</span><img src="{{getComponentPath('image/bixutian.svg')}}" alt="" width="12px" height="12px"/></div><div class="select"><input type="text" ng-model="equipment.model.addr" class="validate input-new-css"/></div></div><div class="selection-box"><div class="label"><span>设备条码：</span></div><div class="select"><input type="text" ng-model="equipment.model.tag" class="validate input-new-css"/></div></div><div class="selection-box"><div class="label"><span>过保日期：</span></div><div class="select"><input type="text" ng-model="equipment.model.expiryDate" class="validate input-new-css"/></div></div></div></div></div><div class="modal-footer modal-nav"><nav><div class="nav-wrapper"><ul><li><a href="" ng-click="saveDevice()" title="确定" class="modal-action"><i class="material-icons left">save</i><span class="hide-on-med-and-down">保存</span></a></li><li class="right"><a href="" class="modal-action modal-close"><i class="material-icons right">close</i><span class="hide-on-med-and-down">关闭</span></a></li></ul></div></nav></div></div><div id="modal2" md-modal="md-modal" class="modal bottom-sheet modal-fixed-footer"><div class="row nav-top"><div class="col s12 m12 l12 upload"><div class="choiceLabel"><span>选择设备库:</span></div><div class="choiceRoute"><input id="upload" type="file" accept=".zip" style="display: none;" class="file"/><input name="fileName" value="{{fileNameStr}}" readonly="readonly"/><div id="file" ng-click="file()" class="browseBtn">...</div></div><div ng-click="confirmSha()" class="confirmUpload btn"><span>安装  </span></div></div></div><div class="modal-content"><div class="row"><div class="col s12 m12 l12 form"><table><thead><tr><th style="width:10%"><div class="col-header"><span>序号</span></div></th><th><div class="col-header"><span>设备类型</span></div></th><th><div class="col-header"><span>设备模板</span></div></th><th><div class="col-header"><span>版本</span></div></th><th><div class="col-header"><span>描述</span></div></th><th><div class="col-header"><span>卸载设备库</span></div></th></tr></thead><tbody><tr ng-repeat="(index,equip) in elementsArr"><td style="width:10%">{{index + 1}}</td><td>{{equip.model.typeName}}</td><td>{{equip.model.name}}</td><td>{{equip.model.libraryVersion? equip.model.libraryVersion:"--"}}</td><td>{{equip.model.description? equip.model.description:"--"}}</td><td> <div ng-click="uninstall(equip)" class="uninstall btn"><span>卸载</span></div></td></tr></tbody></table></div></div></div></div>