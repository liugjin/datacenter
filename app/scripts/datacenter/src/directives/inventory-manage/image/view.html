<div class="row nav-top"><div class="col s2"><span>资产管理</span></div><div class="col l10"><nav><div class="nav-wrapper"><a ng-repeat="parent in parents" href="" data-hover="true" md-dropdown="md-dropdown" title="{{parent.model.name}}" ng-click="selectParent(parent)" ng-if="parents" class="breadcrumb">{{parent.model.name}}</a><a href="" data-target="stations" data-hover="true" data-constrain-width="false" md-dropdown="md-dropdown" title="{{station.model.name}}" class="breadcrumb dropdown-trigger">{{station.model.name}}</a><a href="" data-target="children" data-hover="true" data-constrain-width="false" md-dropdown="md-dropdown" ng-if="station.stations.length&gt;0" class="breadcrumb dropdown-trigger"><span class="active-menu">查看下级</span></a></div></nav></div></div><ul id="stations" class="dropdown-content"><li ng-repeat="sta in stations | filter:{key: &quot;!=&quot;+station.key}" ng-class="{active: sta.key == station.key}"><a ng-href="" ng-click="selectStation(sta)"><span>{{sta.model.name}}</span></a></li></ul><ul id="children" ng-if="station.stations.length&gt;0" class="dropdown-content"><li ng-repeat="sta in station.stations"><a ng-href="" ng-click="selectChild(sta)"><span>{{sta.model.name}}</span></a></li></ul><div style="margin-right: 0;" class="row inventory"><div class="col s2 m2 l2 invent-type"><div ng-repeat="type in equipTypes | filter: filterTypes() | orderBy: 'index': false" ng-class="{'current-type': type.type == currentType.type}" ng-click="selectEquipType(type)" class="col s12 m12 l12 type btn"><a ng-href="" class="title"><div class="type-img"><div style="background-image: url('{{setting.urls.uploadUrl}}/{{type.image}}');" ng-if="type.image" ng-class="{'img-type': type.type != currentType.type, 'img-type-active': type.type == currentType.type}" class="img-bing"></div></div><div class="type-count">{{type.name}}<div class="right">({{type.count}})</div></div></a></div></div><div ng-show="addShow" class="col s10 m10 l10 invent-list"><div ng-show="!detail" class="inventory-lists"><div class="col s12 m12 l12 inventory-nav"><div class="nav-flex-grow left"><a href="" ng-click="addEquipment()" title="新增设备" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{addImg}}"/></div><span>新增</span></a></div><div class="nav-flex-grow left"><a href="" ng-click="switchView()" title="切换列表/视图" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{viewImg}}"/></div><span>{{viewName}}</span></a></div><div class="nav-flex-grow left"><a href="" ng-click="importAssets()" title="通过EXCEL表导入资产" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{viewImg}}"/></div><span>资产导入</span></a></div><div class="right search-wrapper"><i class="material-icons">search</i><input type="text" placeholder="搜索" ng-model="searchLists" required="required" class="search-input"/><i style="left: 225px;" ng-click="searchLists = ''; pageIndex = 1;" ng-show="searchLists" class="material-icons">close</i></div></div><!--.col.s12.m12.l12.silver-line(ng-show="view")--><!-- 列表视图--><div ng-show="view" class="col s12 m12 l12 list-view"><div style="height:65vh;overflow:auto;" class="col s12 m12 l12"><table class="responsive-table centered highlight"><thead><tr><th><div ng-click="station.equipments.sortBy(&quot;model.name&quot;)" class="col-header"><span>名称</span><span ng-show="station.equipments.predicate == &quot;model.name&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><!--th.col-header(ng-click='station.equipments.sortBy("model.equipment")')
    span 资产编号
    span.right(ng-show='station.equipments.predicate == "model.equipment"') {{station.equipments.reverse && "▽" || "△"}}--><th><div ng-click="station.equipments.sortBy(&quot;model.equipment&quot;)" class="col-header"><span>设备ID</span><span ng-show="station.equipments.predicate == &quot;model.equipment&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div class="col-header"><span>资产编号</span><span ng-show="station.equipments.predicate == &quot;model.tag&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><!--th.col-header()
    span 序列号
    span.right(ng-show='station.equipments.predicate == "propertyValues.serial-number"') {{station.equipments.reverse && "▽" || "△"}}--><th><div ng-click="station.equipments.sortBy(&quot;model.typeName&quot;)" class="col-header"><span>类型</span><span ng-show="station.equipments.predicate == &quot;model.typeName&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.templateName&quot;)" class="col-header"><span>型号</span><span ng-show="station.equipments.predicate == &quot;model.templateName&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.vendorName&quot;)" class="col-header"><span>厂商</span><span ng-show="station.equipments.predicate == &quot;model.vendorName&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.stationName&quot;)" class="col-header"><span>站点区域</span><span ng-show="station.equipments.predicate == &quot;model.stationName&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.createtime&quot;)" class="col-header"><span>登记时间</span><span ng-show="station.equipments.predicate == &quot;model.createtime&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div ng-click="station.equipments.sortBy(&quot;model.owner&quot;)" class="col-header"><span>责任人</span><span ng-show="station.equipments.predicate == &quot;model.owner&quot;" class="right">{{station.equipments.reverse && "▽" || "△"}}</span></div></th><th><div class="col-header"><span>操作</span></div></th></tr></thead><tbody><tr ng-repeat="equip in equipments | filter: filterEquipment() | orderBy: station.equipments.predicate:station.equipments.reverse | limitTo: pageItems * pageIndex | limitTo: limitToEquipment()" ng-class="{active: equipment.key == equip.key}" ng-click="lookData(equip);"><td>{{equip.model.name}}</td><td>{{equip.model.equipment}}</td><!--td {{equip.getPropertyValue('serial-number')}}--><td>{{equip.model.tag || '-'}}</td><td>{{equip.model.typeName}}</td><td>{{equip.model.templateName}}</td><td>{{equip.model.vendorName}}</td><td>{{equip.model.stationName}}</td><td>{{equip.model.createtime | date: 'yyyy-MM-dd'}}</td><td>{{equip.model.owner}}</td><td style="padding: 0;"><a ng-click="lookData(equip);$event.stopPropagation();" title="查看设备详情" class="waves-effect waves-light"><img ng-src="{{detailGreenImg}}"/></a><a href="" ng-click="editData(equip);$event.stopPropagation();" title="编辑设备" class="waves-effect waves-light"><img ng-src="{{editGreenImg}}"/></a><a href="" ng-click="deleteEquip(equip); $event.stopPropagation();" title="删除设备" class="waves-effect waves-light"><img ng-src="{{deleteGreenImg}}"/></a><a href="" ng-click="copyEquipment(equip); $event.stopPropagation();" title="复制设备" class="waves-effect waves-light"><img ng-src="{{copyGreenImg}}"/></a></td></tr></tbody></table></div><!--.col.s12.m12.l12.eventpaginationdiv(style="flex:1;")
.valign-wrapper(style='flex:2;')
    div(style="margin: 0 auto;")
        ul.pagination(ng-show='filterEquipmentItem().pageCount > 1', ng-cloak)
            li(ng-class='{disabled: pageIndex <= 1, "waves-effect": pageIndex > 1}', ng-click='pageIndex>1?(pageIndex = pageIndex - 1):0')
                a(href='', ng-class="{'black-text': pageIndex > 1}")
                    i.material-icons chevron_left

            li(ng-class='{active: page == pageIndex, "waves-effect": page != pageIndex}' ng-repeat='page in filterEquipmentItem().pages' ng-click='selectPage(page)' ng-if="(page>(pageIndex-4)&&page<(pageIndex+4))||page==1||page==filterEquipmentItem().pageCount")
                a(href='')
                    | {{((page>(pageIndex-3)&&page<(pageIndex+3))||page==1||page==filterEquipmentItem().pageCount) ? page:".."}}

            li.last(ng-class='{disabled: pageIndex >= filterEquipmentItem().pageCount, "waves-effect": pageIndex < filterEquipmentItem().pageCount}', ng-click='pageIndex<filterEquipmentItem().pageCount?(pageIndex = pageIndex + 1):0')
                a(href='', ng-class="{'black-text':pageIndex < filterEquipmentItem().pageCount}")
                    i.material-icons chevron_right
div(style='flex:1;')
--></div><!-- 卡片视图--><div ng-show="!view" class="col s12 m12 l12 list-card"><div ng-repeat="equip in equipments | filter: filterEquipment() | orderBy: station.equipments.predicate:station.equipments.reverse | limitTo: pageItems * pageIndex | limitTo: limitToEquipment()" ng-class="{'pad-left': $index%4==0}" style="padding: 0 0 .75rem .75rem;" ng-click="lookData(equip);" class="col s12 m4 l3"><div class="card hoverable"><div class="card-image"><a ng-href="" title="访问设备"><div class="card-img-placeholder"><img style="cursor:pointer" ng-if="equip.equipmentTemplate.model.image" ng-src="{{setting.urls.uploadUrl}}/{{equip.equipmentTemplate.model.image}}" class="responsive-img"/><!--img.responsive-img(ng-if='equip.image' ng-src='{{setting.urls.uploadUrl}}/{{equip.image}}')--><!--.default-img(ng-style="{'background-image': imgString(equip.model.template)}")--></div></a></div><div class="card-content"><span title="{{equip.model.name}}" style="font-weight:bold; color: #1d2123;"><div class="truncate font-bold">{{equip.model.name}}</div></span><span title="{{equip.model.type}} / {{equip.model.vendor}} / {{equip.model.template}}" style="color: #a2aab6;"><div class="truncate font-12">{{equip.model.typeName}} / {{equip.model.vendorName}} / {{equip.model.templateName}}</div></span><span><div style="margin-top: 5px;" class="truncate"><a href="" ng-click="copyEquipment(equip);$event.stopPropagation();" title="复制设备" class="waves-effect waves-light right"><img ng-src="{{copyGreenImg}}"/></a><a href="" ng-click="deleteEquip(equip);$event.stopPropagation();" title="删除设备" class="waves-effect waves-light right"><img ng-src="{{deleteGreenImg}}"/></a><a href="" ng-click="editData(equip);$event.stopPropagation();" title="编辑设备" class="waves-effect waves-light right"><img ng-src="{{editGreenImg}}"/></a><a href="" ng-click="lookData(equip);$event.stopPropagation();" title="查看设备详情" class="waves-effect waves-light right"><img ng-src="{{detailGreenImg}}"/></a></div></span></div></div></div></div><div class="col s12 m12 l12 eventpagination"><div style="flex:1;"></div><div style="flex:2;" class="valign-wrapper"><div style="margin: 0 auto;"><ul ng-show="filterEquipmentItem().pageCount &gt; 1" ng-cloak="ng-cloak" class="pagination"><li ng-class="{disabled: pageIndex &lt;= 1, &quot;waves-effect&quot;: pageIndex &gt; 1}" ng-click="pageIndex&gt;1?(pageIndex = pageIndex - 1):0"><a href="" ng-class="{'black-text': pageIndex &gt; 1}"><i class="material-icons">chevron_left</i></a></li><li ng-class="{active: page == pageIndex, &quot;waves-effect&quot;: page != pageIndex}" ng-repeat="page in filterEquipmentItem().pages" ng-click="selectPage(page)" ng-if="(page&gt;(pageIndex-4)&amp;&amp;page&lt;(pageIndex+4))||page==1||page==filterEquipmentItem().pageCount"><a href="">{{((page>(pageIndex-3)&&page<(pageIndex+3))||page==1||page==filterEquipmentItem().pageCount) ? page:".."}}</a></li><li ng-class="{disabled: pageIndex &gt;= filterEquipmentItem().pageCount, &quot;waves-effect&quot;: pageIndex &lt; filterEquipmentItem().pageCount}" ng-click="pageIndex&lt;filterEquipmentItem().pageCount?(pageIndex = pageIndex + 1):0" class="last"><a href="" ng-class="{'black-text': pageIndex &lt; filterEquipmentItem().pageCount}"><i class="material-icons">chevron_right</i></a></li></ul></div></div><div style="flex:1;"></div></div></div><div ng-show="detail" class="inventory-detail"><div class="col s12 m12 l12 inventory-nav"><div class="nav-flex-grow left"><a href="" title="返回" ng-click="backList();" class="waves-effect waves-light btn"><div class="left"><img style="height: 1.5rem;" ng-src="{{backImg}}"/></div><span>返回</span></a></div><div class="nav-flex-grow left"><a href="" title="编辑" ng-click="editData(equipment)" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{editBlueImg}}"/></div><span>编辑</span></a></div><div class="right search-wrapper"><i class="material-icons">search</i><input type="text" placeholder="搜索" ng-model="searchDetail" required="required" class="search-input"/><i style="left: 225px;" ng-click="searchDetail = '';" ng-show="searchDetail" class="material-icons">close</i></div></div><!--.col.s12.m12.l12.silver-line--><div class="col s12 m12 l12 invent-detail"><div style="padding: 2rem 0;" class="col s12 m12 l12"><div class="col s12 m4 l5"><div class="card-image"><div style="background-color: rgba(26,69,162,.4);height: 260px;" class="card-img-placeholder"><img ng-if="equipment.model.image" ng-src="{{setting.urls.uploadUrl}}/{{equipment.model.image}}" class="reference-img"/></div></div></div><div style="padding: 0 3rem;" class="col s12 m8 l7"><table class="responsive-table centered"><tbody><tr><td>设备ID</td><td>使用状态</td></tr><tr class="detail"><td>{{equipment.model.equipment}}</td><td>{{equipment.model.statusName}}</td></tr><tr><td>设备类型</td><td>设备剩余寿命</td></tr><tr class="detail"><td>{{equipment.model.typeName}}</td><td>{{equipment.model.remainDate}}个月</td></tr><tr><td>设备型号</td><td>维修倒计时</td></tr><tr class="detail"><td>{{equipment.model.templateName}}</td><td>{{equipment.model.repairDate}}个月</td></tr><tr><td>设备周期状态</td><td>{{equipment.model.enable?"有效":"无效"}}</td></tr></tbody></table></div></div><div class="col s12 m12 l12 other"><div class="col s12 m12 l12"><span class="other-text">采集单元</span></div><div style="margin: 10px 0 20px;" class="col s12 m12 l12"><div ng-repeat="sampleunit in equipment.sampleUnits" class="col l6"><table class="highlight"><tr style="border-bottom: 0;"><td style="width: 25%;color: #a2aab6;">{{sampleunit.name}}</td><td><span>{{sampleunit.value || '--'}}</span></td></tr></table></div></div></div><div class="col s12 m12 l12 other"><div class="col s12 m12 l12"><span class="other-text">其他详情</span></div><div style="margin: 10px 0 20px;" class="col s12 m12 l12"><div ng-repeat="property in equipment.properties.items | filter: filterProperties() | orderBy: 'model.index': false" class="col l6"><table class="highlight"><tr style="border-bottom: 0;"><td style="width: 25%;color: #a2aab6;">{{property.model.name}}</td><td ng-switch="property.model.dataType"><span ng-switch-default="ng-switch-default">{{property.value}}</span><span ng-switch-when="enum">{{property.model.value}}</span><span ng-switch-when="date">{{property.value | date: 'yyyy-MM-dd'}}</span></td></tr></table></div><!--table.highlighttr(style="border-bottom: 0;" ng-repeat="property in equipment.properties.items | filter: filterProperties() | orderBy: 'model.index': false")
    td(style="width: 25%;color: #a2aab6;") {{property.model.name}}
    td(ng-switch='property.model.dataType')
        span(ng-switch-default) {{property.value}}
        span(ng-switch-when='enum') {{property.model.value}}
        span(ng-switch-when='date') {{property.value | date: 'yyyy-MM-dd'}}
--></div></div></div></div></div><div style="" ng-show="editShow" class="col s10 m10 l10 inventory-edit-add"><div ng-show="!add" class="inventory-edit"><div class="col s12 m12 l12 inventory-nav"><div class="nav-flex-grow left"><a href="" title="返回" ng-click="backList();" class="waves-effect waves-light btn"><div class="left"><img style="height:1.5rem;" ng-src="{{backImg}}"/></div><span>返回</span></a></div><div class="nav-flex-grow left"><a href="" title="查看" ng-click="lookData()" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{detailBlueImg}}"/></div><span>查看</span></a></div><div class="right search-wrapper"><i class="material-icons">search</i><input type="text" placeholder="搜索" ng-model="searchEdit" required="required" class="search-input"/><i style="left: 225px;" ng-click="searchEdit = '';" ng-show="searchEdit" class="material-icons">close</i></div></div><div class="col l5 inventory-left"><div class="col l12 inventory-img"><div class="row no-margin"><div class="img-uploader model-img-upload"><image-uploader ng-model="equipment.model.image" dir="{{setting.urls.uploadUrl}}"></image-uploader><!--.col.l12.nav-img.img-title 请上传图片
.img-uploader
    .img-image.img-preview(ng-show='!showLink || !equipment.model.image')
        img.people-img(ng-if="equipment.model.image" ng-src='{{dir + "/" + equipment.model.image}}')
        .img-none(ng-if="!equipment.model.image")
            img(ng-src="{{uploadImg}}")
    input.img-input(type='file' name='uploadInput' accept='{{accept}}' style="display: none;")
    textarea.img-text-area(ng-show='equipment.model.image && showLink' disabled ng-model="equipment.model.image")
    .img-btn
        .btn-flex
            .nav-flex-grow
                a.waves-effect.waves-light.btn(href='' title='删除' ng-click='delete()')
                    .left
                        img(ng-src="{{deleteImg}}")
                    span 删除
            .nav-flex-grow
                a.waves-effect.waves-light.btn(href='' title='显示图片链接' ng-click='showLink = !showLink')
                    .left
                        img(ng-src="{{linkImg}}")
                    span 链接
            .nav-flex-grow
                a.waves-effect.waves-light.btn(title='下载' ng-href='{{dir}}/{{equipment.model.image}}' target='_blank')
                    .left
                        img(ng-src="{{downImg}}")
                    span 下载
--></div></div></div><div class="col l12 critical-model"><div class="col l6 no-padding"><div style="margin-top: 1rem;" class="col l12"><label>设备ID</label><div class="input-field"><input type="text" ng-model="equipment.model.equipment" disabled="disabled" class="validate"/></div></div><div style="" class="col l12"><label>设备站点</label><div class="input-field"><select ng-model="equipment.model.station" md-select="md-select" data="equipment.model" ng-change="stationCheck()"><option ng-repeat="station in project.stations.items" value="{{station.model.station}}" ng-selected="equipment.model.station == station.model.station">{{station.model.name}}</option></select></div></div><div style="" class="col l12"><label>设备类型</label><div class="input-field"><input type="text" ng-model="equipment.model.typeName" disabled="disabled" class="validate"/></div></div><div style="" class="col l12"><label>设备厂商</label><div class="input-field"><input type="text" ng-model="equipment.model.vendorName" disabled="disabled" class="validate"/></div></div><div style="" class="col l12"><label>设备型号</label><div disabled="disabled" class="input-field"><input type="text" ng-model="equipment.model.templateName" disabled="disabled" class="validate"/></div></div><div style="" class="col l12"><label>描述</label><div class="input-field"><input type="textarea" ng-model="equipment.model.desc" style="background-color: transparent;border: none;outline: none;" class="validate"/></div></div><div style="" class="col l12"><div class="input-field"><md-switch ng-model="equipment.model.enable" label-off="无效" label-on="有效" style="margin-left:10px;" ng-change="saveEquipment(this)"></md-switch></div></div></div><div class="col l6 no-padding"><div style="margin-top: 1rem;" class="col l12"><label>设备名称</label><div class="input-field"><input type="text" ng-model="equipment.model.name" ng-focus="saveValue(equipment.model.name)" ng-blur="checkValue(equipment.model.name)" class="validate"/></div></div><div style="" class="col l12"><label>资产编号</label><div class="input-field"><input type="text" ng-model="equipment.model.tag" ng-focus="saveValue(equipment.model.tag)" ng-blur="checkValue(equipment.model.tag)" class="validate"/></div></div><div style="" class="col l12"><label>责任人</label><div class="input-field"><select ng-model="equipment.model.owner" md-select="md-select" data="equipment.model" ng-change="saveEquipment()"><option value="">未知责任人</option><option ng-repeat="user in userMsg" value="{{user.user}}" ng-selected="equipment.model.owner == user.user">{{user.name}}</option></select></div></div><div style="" ng-repeat="property in equipment.properties.items | filter: filterEditItems1() | orderBy: equipment.properties.predicate:true" class="col l12"><label>{{property.model.name}}</label><div ng-switch="property.model.dataType" title="{{property.value}}" class="input-field"><input ng-switch-default="ng-switch-default" type="text" ng-model="property.value" ng-focus="saveValue(property.value)" ng-blur="checkValue(property.value)" class="validate"/><input ng-switch-when="date" type="date" ng-model="property.value" ng-focus="saveValue(property.value)" ng-blur="checkValue(property.value)" class="validate"/></div></div></div></div></div><div class="col l7 inventory-right"><div class="col l12 no-padding inventory-right-pro"><div class="col l12 inventory-right-table"><table class="responsive-table centered"><span>采集单元设置</span><thead><tr><th style="width: 20%;"><span>名称</span></th><th><span>绑定值1</span></th></tr></thead><tbody><tr ng-repeat="sampleunit in equipment.sampleUnits"><td style="color: #a2aab6;">{{sampleunit.name}}</td><td><div class="col s12"><input type="text" ng-model="sampleunit.value" ng-focus="saveValue(sampleunit.value)" ng-blur="checkValue(sampleunit.value)" class="validate"/></div></td></tr></tbody></table><table class="responsive-table centered highlight"><span>扩展属性</span><thead><tr><th style="width: 20%;"><span>名称</span></th><th><span>赋值</span></th><th style="width: 15%;"><span>单位</span></th></tr></thead><tbody><tr ng-repeat="property in equipment.properties.items | filter: filterEditItems2() | orderBy: 'model.index': false"><td style="color: #a2aab6;">{{property.model.name}}</td><td ng-switch="property.model.dataType"><div ng-switch-default="ng-switch-default" class="col s12"><input type="text" ng-model="property.value" ng-focus="saveValue(property.value)" ng-blur="checkValue(property.value)" class="validate"/></div><div ng-switch-when="enum" class="col s12"><select ng-model="property.value" md-select="md-select" data="property.model.dataType" ng-change="saveEquipment()"><option ng-repeat="map in property.model.format.split(',')" value="{{map.split(':')[0]}}" ng-selected="property.value==map.split(':')[0]">{{map.split(':')[1]}}</option></select></div><div ng-switch-when="int" class="col s12"><input type="number" ng-model="property.value" min="{{property.model._format.min}}" max="{{property.model._format.max}}" step="any" ng-focus="saveValue(property.value)" ng-blur="checkValue(property.value)" class="validate"/></div><div ng-switch-when="float" class="col s12"><input ng-if="property.model.property !== 'runday' &amp;&amp; property.model.property !== 'runvalue'" type="number" ng-model="property.value" min="{{property.model._format.min}}" max="{{property.model._format.max}}" step="any" ng-focus="saveValue(property.value)" ng-blur="checkValue(property.value)" class="validate"/><input ng-if="property.model.property == 'runday'" type="number" ng-model="property.value" min="0" max="24" step="any" ng-focus="saveValue(property.value)" ng-blur="checkValue(property.value)" class="validate"/><input ng-if="property.model.property == 'runvalue'" type="number" ng-model="property.value" min="0" step="any" ng-focus="saveValue(property.value)" ng-blur="checkValue(property.value)" class="validate"/></div><div ng-switch-when="color" class="col s12"><input type="color" ng-model="property.value" ng-focus="saveValue(property.value)" ng-blur="checkValue(property.value)" class="validate"/></div><div ng-switch-when="password" class="col s12"><input type="password" ng-model="property.value" ng-focus="saveValue(property.value)" ng-blur="checkValue(property.value)" class="validate"/></div><div ng-switch-when="date" class="col s12"><input type="date" input-format="input-format" ng-model="property.value" ng-focus="saveValue(property.value)" ng-blur="checkValue(property.value)" class="validate"/></div><div ng-switch-when="time" class="col s12"><input type="time" ng-model="property.value" ng-focus="saveValue(property.value)" ng-blur="checkValue(property.value)" class="validate"/></div><div ng-switch-when="datetime" class="col s12"><input type="datetime-local" input-format="input-format" ng-model="property.value" ng-focus="saveValue(property.value)" ng-blur="checkValue(property.value)" class="validate"/></div><div ng-switch-when="bool" class="col s12 property-checkbox"><input type="checkbox" ng-model="property.value" id="cbc-{{property.model.property}}" ng-focus="saveValue(property.value)" ng-blur="checkValue(property.value)"/></div><div ng-switch-when="image" class="col s12"><div class="img-uploader"><image-uploader ng-model="property.value" dir="{{setting.urls.uploadUrl}}" ng-blur="saveEquipment()"></image-uploader></div></div><div ng-switch-when="file" class="col s12"><div class="file-uploader"><file-uploader ng-model="property.value" dir="{{setting.urls.uploadUrl}}" ng-blur="saveEquipment()"></file-uploader></div></div></td><td style="color: #a2aab6;">{{project.typeModels.units.getItem(property.model.unit).model.abbr || property.model.unit}}</td></tr></tbody></table></div></div></div></div><div ng-show="add" class="inventory-add"><div class="col s12 m12 l12 inventory-nav"><div class="nav-flex-grow left"><a href="" title="返回" ng-click="backList();" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{backImg}}" style="height: 1.5rem;"/></div><span>返回</span></a></div><div class="nav-flex-grow left"><a href="" title="保存" ng-click="saveEquipmentGroups()" ng-show="equipment.model.name || equipment.model.desc" class="waves-effect waves-light btn"><div class="left"><img ng-src="{{saveImg}}"/></div><span>保存</span></a></div><div class="right search-wrapper"><i class="material-icons">search</i><input type="text" placeholder="搜索" ng-model="searchEdit" required="required" class="search-input"/><i style="left: 225px;" ng-click="searchEdit = '';" ng-show="searchEdit" class="material-icons">close</i></div></div><div class="col l5 inventory-left"><div class="col l12 inventory-img"><div class="row no-margin"><div class="img-uploader model-img-upload"><image-uploader ng-model="equipment.model.image" dir="{{setting.urls.uploadUrl}}"></image-uploader><!--.col.l12.nav-img.img-title 请上传图片
.img-uploader
    .img-image.img-preview(ng-show='!showLink || !equipment.model.image')
        img.people-img(ng-if="equipment.model.image" ng-src='{{dir + "/" + equipment.model.image}}')
        .img-none(ng-if="!equipment.model.image")
            img(ng-src="{{uploadImg}}")
    input.img-input(type='file' name='uploadInput' accept='{{accept}}' style="display: none;")
    textarea.img-text-area(ng-show='equipment.model.image && showLink' disabled ng-model="equipment.model.image")
    .img-btn
        .btn-flex
            .nav-flex-grow
                a.waves-effect.waves-light.btn(href='' title='删除' ng-click='delete()')
                    .left
                        img(ng-src="{{deleteImg}}")
                    span 删除
            .nav-flex-grow
                a.waves-effect.waves-light.btn(href='' title='显示图片链接' ng-click='showLink = !showLink')
                    .left
                        img(ng-src="{{linkImg}}")
                    span 链接
            .nav-flex-grow
                a.waves-effect.waves-light.btn(title='下载' ng-href='{{dir}}/{{equipment.model.image}}' target='_blank')
                    .left
                        img(ng-src="{{downImg}}")
                    span 下载
--></div></div></div><div class="col l12 critical-model"><div class="col l6 no-padding"><div style="margin-top: 1rem;" class="col l12"><label>设备站点</label><div class="input-field"><select ng-model="equipment.model.station" md-select="md-select" data="equipment.model" ng-change="stationChange()"><option ng-repeat="station in project.stations.items" value="{{station.model.station}}" ng-selected="equipment.model.station == station.model.station">{{station.model.name}}</option></select></div></div><div style="" class="col l12"><label>设备类型</label><div class="input-field"><select ng-model="equipment.model.type" md-select="md-select" data="equipment.model" ng-change="equipTypeChange()"><option value="">未知设备类型</option><option ng-repeat="type in project.typeModels.equipmenttypes.items" value="{{type.model.type}}" ng-selected="equipment.model.type == type.model.type">{{type.model.name}}</option></select></div></div><div style="" class="col l12"><label>设备厂商</label><div class="input-field"><select ng-model="equipment.model.vendor" md-select="md-select" data="equipment.model" ng-change="equipVendorChange()"><option value="">未知设备厂商</option><option ng-repeat="vendor in project.typeModels.vendors.items" value="{{vendor.model.vendor}}" ng-selected="equipment.model.vendor == vendor.model.vendor">{{vendor.model.name}}</option></select></div></div><div style="" class="col l12"><label>设备型号</label><div class="input-field"><select ng-model="equipment.model.template" md-select="md-select" data="equipment.model.type + &quot;.&quot; + equipment.model.vendor" ng-change="equipTemplateChange()"><option value="">未知设备型号</option><option ng-repeat="template in project.equipmentTemplates.items | filter: filterEquipmentTemplate()" value="{{template.model.template}}" ng-selected="equipment.model.template == template.model.template">{{template.model.name}}</option></select></div></div><div style="" class="col l12"><label>责任人</label><div class="input-field"><select ng-model="equipment.model.owner" md-select="md-select" data="equipment.model"><option value="">未知责任人</option><option ng-repeat="user in userMsg" value="{{user.user}}" ng-selected="equipment.model.owner == user.user">{{user.name}}</option></select></div></div></div><div class="col l6 no-padding"><div style="margin-top: 1rem;" class="col l12"><label>设备ID</label><div class="input-field"><input type="text" ng-model="equipment.model.equipment" disabled="disabled" class="validate"/></div></div><div style="" class="col l12"><label>设备名称</label><div class="input-field"><input type="text" ng-model="equipment.model.name" class="validate"/></div></div><div style="" class="col l12"><label>描述</label><div class="input-field"><input type="textarea" ng-model="equipment.model.desc" style="" class="validate desc"/></div></div><div style="" ng-repeat="property in equipment._properties | filter: filterEditItems1() | orderBy: 'model.group':true" class="col l12"><label>{{property.model.name}}</label><div ng-switch="property.model.dataType" title="{{property.value}}" class="input-field"><input ng-switch-default="ng-switch-default" type="text" ng-model="property.value" class="validate"/><input ng-switch-when="date" type="date" ng-model="property.value" class="validate"/></div></div></div></div></div><div class="col l7 inventory-right"><div class="col l12 no-padding inventory-right-pro"><div class="col l12 inventory-right-table"><table class="responsive-table centered"><span>采集单元设置</span><thead><tr><th style="width: 20%;"><span>名称</span></th><th><span>绑定值</span></th></tr></thead><tbody><tr ng-repeat="sampleunit in equipment._sampleUnits| orderBy: 'name': true"><td style="color: #a2aab6;">{{sampleunit.name}}</td><td><div class="col s12"><input type="text" ng-model="sampleunit.value" class="validate"/></div></td></tr></tbody></table><table class="responsive-table centered"><span>扩展属性</span><thead><tr><th style="width: 20%;"><span>名称</span></th><th><span>赋值</span></th><th style="width: 15%;"><span>单位</span></th></tr></thead><tbody><tr ng-repeat="property in equipment._properties | filter: filterEditItems2() | orderBy: 'model.index': false"><td style="color: #a2aab6;">{{property.model.name}}</td><td ng-switch="property.model.dataType"><div ng-switch-default="ng-switch-default" class="col s12"><input type="text" ng-model="property.model.value" class="validate"/></div><div ng-switch-when="enum" class="col s12"><select ng-model="property.model.value" md-select="md-select" data="property.model.dataType"><option ng-repeat="map in property.model.format.split(',')" value="{{map.split(':')[0]}}" ng-selected="property.model.value==map.split(':')[0]">{{map.split(':')[1]}}</option></select></div><div ng-switch-when="int" class="col s12"><input type="number" ng-model="property.model.value" min="{{property.model._format.min}}" max="{{property.model._format.max}}" step="any" class="validate"/></div><div ng-switch-when="float" class="col s12"><input type="number" ng-model="property.model.value" min="{{property.model._format.min}}" max="{{property.model._format.max}}" step="any" class="validate"/></div><div ng-switch-when="color" class="col s12"><input type="color" ng-model="property.model.value" class="validate"/></div><div ng-switch-when="password" class="col s12"><input type="password" ng-model="property.model.value" class="validate"/></div><div ng-switch-when="date" class="col s12"><input type="date" input-format="input-format" ng-model="property.model.value" class="validate"/></div><div ng-switch-when="time" class="col s12"><input type="time" ng-model="property.model.value" class="validate"/></div><div ng-switch-when="datetime" class="col s12"><input type="datetime-local" input-format="input-format" ng-model="property.model.value" class="validate"/></div><div ng-switch-when="bool" class="col s12 property-checkbox"><input type="checkbox" ng-model="property.model.value" id="cb-{{property.model.property}}"/></div><div ng-switch-when="image" class="col s12"><div style="margin: 0 auto;" class="img-uploader"><image-uploader ng-model="property.model.value" dir="{{setting.urls.uploadUrl}}"></image-uploader></div></div><div ng-switch-when="file" class="col s12"><div class="file-uploader"><file-uploader ng-model="property.model.value" dir="{{setting.urls.uploadUrl}}"></file-uploader></div></div></td><td style="color: #a2aab6;">{{project.typeModels.units.getItem(property.model.unit).model.abbr || property.model.unit}}</td></tr></tbody></table></div></div></div></div></div><import-assets controller="controller" parameters="{}" ng-show="assetShow"></import-assets></div>